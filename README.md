# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


# Описания файла WebLarekModel

## класс WebLarekModel: 

Класс модели для управления корзиной товаров и оплатой. В этом классе основная бизнес-логика


### поля 
* items - защищенное поле который будет в себе содержать массив товаров 

* isValidAddress - защищенное поле  валидности формы с адресом. Возращает true, иначе false

* isValidData - защищенное поле валидности формы с емейлом и телефоном. Возращает true, иначе false

* orderDetails - защищенное поле содержащий все данные о заказе. 


## методы

### метод getTotalAmount:

Подсчитывает общую сумму всех товаров в корзине

 - ** @returns ** {number} общая сумма товаров.


### метод validationAddressForm

Проверяет корректность адреса веденный пользователям.

- ** @returns ** {boolean} true, если данные валидны, иначе false.

### метод validationPhoneForm

Проверяет корректность телефона веденный пользователям.

- ** @returns ** {boolean} true, если данные валидны, иначе false.

### метод validationEmailForm

Проверяет корректность имейла веденный пользователям.

- ** @returns ** {boolean} true, если данные валидны, иначе false.
 

### метод setPaymentMethod:

Устанавливает выбранный пользователем способ оплаты.

 - ** @param ** {method} method - способо оплаты ('online' или 'cash_on_delivery').

### метод addToCart:

Добавляет товар в корзину.

 - ** @param ** {item} item - товар который добавяется в корзину.

 - ** @returns ** {number} возращает  количество товаров в корзине.


### метод deleteItem:

Удаляет товар с корзины по его уникальному id.

 - ** @param ** {item} item - товар для удаления.

 - ** @returns ** {ICardItem[]} обновленный список товаров в корзине.


### метод getItem: 

Возращает определенный товар по его id, если такого товара нет, возращает undefined

 - ** @returns ** {ICardItem | undefined} возращает товар или undefined .


### метод getItems:

Возращает текущий список товаров в коризне.

 - ** @returns ** {ICardItem[]} массив товаров в корзине.


# Описания файла WebLarekApi

Класс WebLarekApi расширяет базовый класс Api и предоставляет методы для взаимодействия с серверным API, связанным с товарами магазина. Отвечает за получение списка товаров, добавление нового товара и удаление существующего.

## Интерфейс IItemsResponse
 * Определяет структуру ответа от сервера при запросе списка товаров

## Конструктор 

* @param baseUrl — базовый URL API, передаётся в конструктор базового класса Api.

## методы 

### метод getItems

- ** @returns ** {Promise<ICardItem[]>} возращает промис и получение список товаров с сервера.


### метод getItem

- ** @returns ** {Promise<ICardItem>} возращает промис и возращает товар пользователя.

### метод getPushItems

- ** @returns ** {Promise<ICardItem>} отправляет заказы на сервер.

# Описания файла item             

## описания класса Item

* Класс Item отвечает за отображение информации о товаре в карточке товара. Наследуется от базового класса Component<ICardItem>, управляет DOM-элементами, отображающими название, изображение, цену и категорию товара.

# Интерфейс ICardItem

Интерфейс описывающий данные о товаре: title, description, category, image, price.

### Поля класса 

Поля содержут имя карточки, категорию, изображение, цену. Имеют защищенное свойство protected 

### конструктор

Конструктов принимает на вход контейнер. В нем вызывается метод super чтобы при создании карточки объявился новый объект с новыми данными.
Находит все динамические элементы при помощи ensureElement чтобы в дальнейшем внести в них данные.


### set title 

На вход принимает значение, название карточки и его подставляет. 



### set image 

На вход принимает значение, изображение карточки и его подставляет. 


### set price

На вход принимает значение, цену карточки и его подставляет. 


### set category

На вход принимает значение, категорию карточки и его подставляет. 


# Описания файла Page

## Класс Page 

Класс Page отвечает за управление отображением списка элементов товаров на странице. Наследуется от базового класса Component<IPage>. Управляет контейнером галереи и обновляет его содержимое.

## интерфейс IPage
Интерфейс описывает структуру данных страницы с одним полем: 

* WebLarekItems — массив HTML-элементов, представляющих товары для отображения.

## Поля класса 

* webLarekList — контейнер галереи на странице, в котором отображаются элементы товаров.


# Конструктор 

@param {HTMLElement} container - Родительский контейнер страницы, внутри которого будет искаться элемент с классом `.gallery`.
 * Инициализирует экземпляр класса, вызывая конструктор базового класса с контейнером.
 * Затем ищет и сохраняет в свойство `webLarekList` элемент с классом `.gallery` внутри переданного контейнера.
 * Если элемент не найден, выбрасывается ошибка (через функцию ensureElement).


# Сеттер для свойства WebLarekItems.
 * @param {HTMLElement[]} items - Массив HTML-элементов, представляющих товары для отображения.
 * 
 * Заменяет текущее содержимое элемента `webLarekList` на переданный массив элементов.
 * Использует метод `replaceChildren` для эффективного обновления DOM без лишних перерисовок.
 */



# описания файла Form 
## Описания класса Form

Класс принимает DOM-элементы и ими управляет


## Описания интерфейса IForm

Интерфейс имеет значение с типом данных `string`


## защищенные поля класса

* inputElementAddress - поле с инпутом адресса 
* inputElementEmail - поле с инпутом электронной почты 
* inputElementPhone - поле с инпутом номера телефона 
* submitButton - событийная кнопка для отправки данных  
* buttonCash - кнопка если пользователь выбрал оплату при получении
* buttonCard - кнопка если пользователь выбрал оплату онлайн 

## Приватные свойства
* currentStep - свойство содержащий в себе активного шага в форме
* stepUpdateButton - свойство содержащий в себе массив названия кнопок

## Конструктор 

 
 * @param container - HTML-элемент контейнера, внутри которого расположена форма.
 *
 * Инициализирует основные элементы формы:
 * - Поля ввода адреса, email и телефона.
 * - Кнопки отправки формы, выбора оплаты наличными и оплаты картой.
 *
 * Выполняет начальную настройку интерфейса, вызывая метод updateButtonText(),
 * который обновляет текст кнопки отправки в зависимости от текущего состояния.
 *
 * Добавляет обработчик события клика на кнопку отправки формы (SubmitButton),
 * который запускает метод nextStep() для перехода к следующему шагу оформления заказа.


## сеттер value

* Устанавливает значение поля ввода адреса.
 *
 * @param value - строка с адресом пользователя.


 ## сеттер buttonText

 * Устанавливает текст кнопки отправки формы.
 *
 * @param value - текст, который будет отображён на кнопке.


 ## сеттер checkButtonCash

 * Активирует кнопку оплаты картой и деактивирует кнопку оплаты наличными.
 *
 * @param value - если true, кнопка карты становится активной, иначе неактивной.



## сеттер checkButtonCard

 * Активирует кнопку оплаты наличными и деактивирует кнопку оплаты картой.
 *
 * @param value - если true, кнопка наличных становится активной, иначе неактивной.


 ## метод updateButtonText

 * Обновляет текст кнопки отправки в зависимости от текущего шага оформления.
 * Использует массив `stepUpdateButton` для выбора текста.
 * Если текст для текущего шага отсутствует, устанавливает значение по умолчанию "Далее".


 ## метод nextStep 

* Переходит к следующему шагу оформления заказа.
 * Если текущий шаг не последний, увеличивает счётчик шага и обновляет текст кнопки.
 * Если шаг последний, вызывает отправку формы методом submitForm().

 ## метод submitForm 

* Обрабатывает отправку формы.
 * В текущей реализации выводит в консоль сообщение о том, что форма отправлена.
 * Здесь можно добавить логику отправки данных на сервер.

## Метод closeModal

* Метод обеспечивает работу с одним модальным окном с id `modal-container`, которое управляет показам и скрытием окна при следующих действиях:

* Нажатие клавиши Escape (Esc).

* Клик вне области модального окна (на затемнённой подложке).

* Клик на кнопку закрытия (крестик) внутри модального окна.

# Описание файла ModalProduct

## Описание класса ModalProduct
* Класс ModalProduct отвечает за отображение подробной информации о товаре в модальном окне. Наследуется от базового класса Component<ICardItem>. Использует HTML-шаблон для динамического создания содержимого и предоставляет сеттеры для установки данных товара.

## Поля класса

* templateContainer — HTML-шаблон модального окна.

* itemTitle — элемент для отображения названия товара.

* itemImage — элемент для отображения изображения товара.

* itemPrice — элемент для отображения цены товара.

* itemTag — элемент для отображения категории товара.

* buttonPay — кнопка оплаты.

* itemDescription — элемент для отображения описания товара.

## Конструктор
@param container - HTML-элемент контейнера, в который будет вставлен клон шаблона модального окна.

Выполняет клонирование содержимого HTML-шаблона с id card-preview и добавляет его в контейнер.

Инициализирует основные элементы модального окна (заголовок, изображение, цена, категория, кнопка оплаты, описание) с помощью функции ensureElement.

## Сеттеры

* title — устанавливает заголовок товара.

* image — устанавливает URL изображения товара.

* price — устанавливает цену товара с добавлением текста "спинов".

* category — устанавливает категорию товара.

* description — устанавливает описание товара.



# Описание файла formCart

## Описание класса `FormCart`

Класс formCart отвечает за отображение и управление списком товаров в корзине пользователя. Наследуется от базового класса Component<IProduct>. Позволяет устанавливать список товаров и обновлять отображение корзины.


## Описание интерфейса IProduct

Интерфейс описывает структуру объекта товара с двумя основными полями: название и цена.


## Поля класса


* `productList` — контейнер для списка товаров в корзине.

* `buttonCart` — кнопка, связанная с корзиной (например, для открытия или оформления).

## Конструктор

@param `container` — HTML-элемент контейнера, в котором расположены элементы корзины.

* Инициализирует основные элементы корзины: кнопку и контейнер списка товаров, используя функцию ensureElement.


## Сеттер items

* Устанавливает массив товаров для отображения в корзине и вызывает метод render для обновления интерфейса.

## Публичный метод render
* Отвечает за обновление DOM-элементов списка товаров в корзине.

* Если передан параметр data (частичный объект товара), отобразит только этот товар.

* Если параметр отсутствует, отобразит весь массив products.

* Возвращает элемент контейнера списка товаров.

### Описание класса ModalSuccess

* Класс ModalSuccess отвечает за отображение модального окна с сообщением об успешной покупке. Наследуется от базового класса Component<unknown> * (или другого подходящего интерфейса) и управляет показом и скрытием модального окна с подтверждением успешного оформления заказа.

## Поля класса

* modalContainer — контейнер модального окна.

* closeButton — кнопка для закрытия модального окна.

* messageElement — элемент для отображения текста сообщения.


## Конструктор

* @param container — HTML-элемент контейнера, в который вставляется модальное окно.

* Инициализирует элементы модального окна и навешивает обработчик на кнопку закрытия.


## Методы 

* show - Отображает модальное окно с сообщением об успешной покупке.

* hide - Скрывает модальное окно.


## Описание класса counterProducts

Функциональность `counterProducts` реализует отображение счетчика количества товаров на кнопке корзины в правом верхнем углу. При добавлении каждого нового товара счетчик увеличивается на единицу, показывая текущее количество товаров в корзине.

## Поля класса

* cartCounter — DOM-элемент, отображающий числовое значение счетчика товаров на кнопке корзины

## Конструктор
* Инициализирует кнопку корзины и элемент счетчика с помощью функции ensureElement.

* Вызывает метод updateCounter для установки начального состояния счетчика (скрыт, если товаров нет).

## Метод addItem
* Добавляет товар в массив products.

* Обновляет отображение списка товаров вызовом render.

* Обновляет счетчик товаров вызовом updateCounter.

## Метод updateCounter
* Обновляет текст счетчика, устанавливая его равным количеству товаров в корзине.

* Показывает счетчик, если товаров больше нуля, и скрывает, если корзина пуста.